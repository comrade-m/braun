<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>


<div id ="hintergrund" class="maschine" ></div>

<div id="k0" class="scheibe" ></div>
<div id="k1" class="scheibe" ></div>
<div id="k2" class="scheibe" ></div>
<div id="k3" class="scheibe" ></div>
<div id="k4" class="scheibe" ></div>
<div id="k5" class="scheibe" ></div>
<div id="k6" class="scheibe" ></div>
<div id="k7" class="scheibe" ></div>
<div id="k8" class="scheibe" ></div>
<div id="k9" class="scheibe" ></div>
<div id="k10" class="scheibe" ></div>
<div id="k11" class="scheibe" ></div>




<div id="e0" class="scheibe" ></div>
<div id="e1" class="scheibe" ></div>
<div id="e2" class="scheibe" ></div>
<div id="e3" class="scheibe" ></div>
<div id="e4" class="scheibe" ></div>
<div id="e5" class="scheibe" ></div>
<div id="e6" class="scheibe" ></div>
<div id="e7" class="scheibe" ></div>
<div id="e8" class="scheibe" ></div>
<div id="e9" class="scheibe" ></div>
<div id="e10" class="scheibe" ></div>
<div id="e11" class="scheibe" ></div>


<div id ="maschine" class="maschine" ></div>
<div id ="feststellstift" class="maschine" ></div>


<div id="zaehlstift" class="maschine"></div>
<div id="anzeigering" class="maschine"></div>

<!-- setzplatten -->
<div class="maschine" id="s1-1" ></div>
<div class="maschine" id="s1-2" ></div>
<div class="maschine" id="s1-3" ></div>
<div class="maschine" id="s1-4" ></div>
<div class="maschine" id="s1-5" ></div>
<div class="maschine" id="s1-6" ></div>
<div class="maschine" id="s1-7" ></div>
<div class="maschine" id="s1-8" ></div>
<div class="maschine" id="s1-9" ></div>
<div class="maschine" id="s2-1" ></div>
<div class="maschine" id="s2-2" ></div>
<div class="maschine" id="s2-3" ></div>
<div class="maschine" id="s2-4" ></div>
<div class="maschine" id="s2-5" ></div>
<div class="maschine" id="s2-6" ></div>
<div class="maschine" id="s2-7" ></div>
<div class="maschine" id="s2-8" ></div>
<div class="maschine" id="s2-9" ></div>
<div class="maschine" id="s3-1" ></div>
<div class="maschine" id="s3-2" ></div>
<div class="maschine" id="s3-3" ></div>
<div class="maschine" id="s3-4" ></div>
<div class="maschine" id="s3-5" ></div>
<div class="maschine" id="s3-6" ></div>
<div class="maschine" id="s3-7" ></div>
<div class="maschine" id="s3-8" ></div>
<div class="maschine" id="s3-9" ></div>
<div class="maschine" id="s4-1" ></div>
<div class="maschine" id="s4-2" ></div>
<div class="maschine" id="s4-3" ></div>
<div class="maschine" id="s4-4" ></div>
<div class="maschine" id="s4-5" ></div>
<div class="maschine" id="s4-6" ></div>
<div class="maschine" id="s4-7" ></div>
<div class="maschine" id="s4-8" ></div>
<div class="maschine" id="s4-9" ></div>
<div class="maschine" id="s5-1" ></div>
<div class="maschine" id="s5-2" ></div>
<div class="maschine" id="s5-3" ></div>
<div class="maschine" id="s5-4" ></div>
<div class="maschine" id="s5-5" ></div>
<div class="maschine" id="s5-6" ></div>
<div class="maschine" id="s5-7" ></div>
<div class="maschine" id="s5-8" ></div>
<div class="maschine" id="s5-9" ></div>
<div class="maschine" id="s6-1" ></div>
<div class="maschine" id="s6-2" ></div>
<div class="maschine" id="s6-3" ></div>
<div class="maschine" id="s6-4" ></div>
<div class="maschine" id="s6-5" ></div>
<div class="maschine" id="s6-6" ></div>
<div class="maschine" id="s6-7" ></div>
<div class="maschine" id="s6-8" ></div>
<div class="maschine" id="s6-9" ></div>



<!-- clickflächen Ergebniswerk -->
<div id="es0" class="ergebnisstelle" onclick="stell(0);" ></div>
<div id="es1" class="ergebnisstelle" onclick="stell(1);" ></div>
<div id="es2" class="ergebnisstelle" onclick="stell(2);" ></div>
<div id="es3" class="ergebnisstelle" onclick="stell(3);" ></div>
<div id="es4" class="ergebnisstelle" onclick="stell(4);" ></div>
<div id="es5" class="ergebnisstelle" onclick="stell(5);" ></div>
<div id="es6" class="ergebnisstelle" onclick="stell(6);" ></div>
<div id="es7" class="ergebnisstelle" onclick="stell(7);" ></div>
<div id="es8" class="ergebnisstelle" onclick="stell(8);" ></div>
<div id="es9" class="ergebnisstelle" onclick="stell(9);" ></div>
<div id="es10" class="ergebnisstelle" onclick="stell(10);" ></div>
<div id="es11" class="ergebnisstelle" onclick="stell(11);" ></div>

<!-- clickflächen Zählwerk -->
<!-- zählstiftloch 0 muss über kurbel sein, da die kurbel doppelt so lange ist, wie gesehen wird-->
<div id="z1" class="ergebnisstelle" onclick="zaehl(1);" ></div>
<div id="z2" class="ergebnisstelle" onclick="zaehl(2);" ></div>
<div id="z3" class="ergebnisstelle" onclick="zaehl(3);" ></div>
<div id="z4" class="ergebnisstelle" onclick="zaehl(4);" ></div>
<!-- zählstiftloch 5 muss über kurbel sein, da bei HOVER die Kurbel verschwindet-->
<div id="z6" class="ergebnisstelle" onclick="zaehl(6);" ></div>
<div id="z7" class="ergebnisstelle" onclick="zaehl(7);" ></div>
<div id="z8" class="ergebnisstelle" onclick="zaehl(8);" ></div>
<div id="z9" class="ergebnisstelle" onclick="zaehl(9);" ></div>

<!-- schlüsselloch -->
<div id="schlusselloch"></div>


<!-- kurbel -->

<div id="kurbel" onclick="move();" ></div>

<!-- zählstiftloch 5-->
<div id="z0" class="ergebnisstelle" onclick="zaehl(0);" ></div>
<div id="z5" class="ergebnisstelle" onclick="zaehl(5);" onmouseover="sichtbarkeit(0);" onmouseout="sichtbarkeit(1);" ></div>

<!-- Feststellstift -->
<div id="feststellstift_click" onclick="feststellen();"></div>



<!-- Clickflächen der Stellplatten-->
<div id="p0" class="platten" onclick="setz(0);" ></div>
<div id="p1" class="platten" onclick="setz(1);" ></div>
<div id="p2" class="platten" onclick="setz(2);" ></div>
<div id="p3" class="platten" onclick="setz(3);" ></div>
<div id="p4" class="platten" onclick="setz(4);" ></div>
<div id="p5" class="platten" onclick="setz(5);" ></div>
<div id="p6" class="platten" onclick="setz(6);" ></div>
<div id="p7" class="platten" onclick="setz(7);" ></div>
<div id="p8" class="platten" onclick="setz(8);" ></div>
<div id="p9" class="platten" onclick="setz(9);" ></div>
<div id="p10" class="platten" onclick="setz(10);" ></div>
<div id="p11" class="platten" onclick="setz(11);" ></div>
<div id="p12" class="platten" onclick="setz(12);" ></div>
<div id="p13" class="platten" onclick="setz(13);" ></div>
<div id="p14" class="platten" onclick="setz(14);" ></div>
<div id="p15" class="platten" onclick="setz(15);" ></div>
<div id="p16" class="platten" onclick="setz(16);" ></div>
<div id="p17" class="platten" onclick="setz(17);" ></div>
<div id="p18" class="platten" onclick="setz(18);" ></div>
<div id="p19" class="platten" onclick="setz(19);" ></div>
<div id="p20" class="platten" onclick="setz(20);" ></div>
<div id="p21" class="platten" onclick="setz(21);" ></div>
<div id="p22" class="platten" onclick="setz(22);" ></div>
<div id="p23" class="platten" onclick="setz(23);" ></div>
<div id="p24" class="platten" onclick="setz(24);" ></div>
<div id="p25" class="platten" onclick="setz(25);" ></div>
<div id="p26" class="platten" onclick="setz(26);" ></div>
<div id="p27" class="platten" onclick="setz(27);" ></div>
<div id="p28" class="platten" onclick="setz(28);" ></div>
<div id="p29" class="platten" onclick="setz(29);" ></div>
<div id="p30" class="platten" onclick="setz(30);" ></div>
<div id="p31" class="platten" onclick="setz(31);" ></div>
<div id="p32" class="platten" onclick="setz(32);" ></div>
<div id="p33" class="platten" onclick="setz(33);" ></div>
<div id="p34" class="platten" onclick="setz(34);" ></div>
<div id="p35" class="platten" onclick="setz(35);" ></div>
<div id="p36" class="platten" onclick="setz(36);" ></div>
<div id="p37" class="platten" onclick="setz(37);" ></div>
<div id="p38" class="platten" onclick="setz(38);" ></div>
<div id="p39" class="platten" onclick="setz(39);" ></div>
<div id="p40" class="platten" onclick="setz(40);" ></div>
<div id="p41" class="platten" onclick="setz(41);" ></div>
<div id="p42" class="platten" onclick="setz(42);" ></div>
<div id="p43" class="platten" onclick="setz(43);" ></div>
<div id="p44" class="platten" onclick="setz(44);" ></div>
<div id="p45" class="platten" onclick="setz(45);" ></div>
<div id="p46" class="platten" onclick="setz(46);" ></div>
<div id="p47" class="platten" onclick="setz(47);" ></div>
<div id="p48" class="platten" onclick="setz(48);" ></div>
<div id="p49" class="platten" onclick="setz(49);" ></div>
<div id="p50" class="platten" onclick="setz(50);" ></div>
<div id="p51" class="platten" onclick="setz(51);" ></div>
<div id="p52" class="platten" onclick="setz(52);" ></div>
<div id="p53" class="platten" onclick="setz(53);" ></div>

<!-- schlüssellochcklickflächen -->
<div id="up" class="schlusselloch_click" onclick="bereich(1);"></div>
<div id="down" class="schlusselloch_click" onclick="bereich(-1);"></div>











</body>
</html>



<script type="text/javascript">


//Sleepfunktion
// Zitat https://medium.com/dev-genius/how-to-make-javascript-sleep-or-wait-d95d33c99909
/*
const sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))

async function repeatedGreetingsLoop() {
	for (let i = 1; i <= 5; i++) {
		await sleepNow(1000)
		console.log(`Hello #${i}`)
  }
}

repeatedGreetingsLoop()
*/

const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))
// Zitat_Ende


function bogen(w){return w/360*2*Math.PI;}//das bogenmaß
function turn(element, w){
//Die Rotation wird in jedem Browser anders gemacht daher
//ZITAT https://stackoverflow.com/questions/8534699/ms-transform-for-ie9-in-javascript
element.style['msTransform'] = 'rotate('+ w +'deg)'; // IE
element.style['MozTransform'] = 'rotate('+ w +'deg)'; // Firefox
element.style['WebkitTransform'] = 'rotate('+ w +'deg)'; // Chrome
element.style['OTransform'] = 'rotate('+ w +'deg)'; // Opera
element.style['Transform'] = 'rotate('+ w +'deg)'; // Opera
// ZITAT_ENDE
}

function wait(ms){
	var zeit = Date.now() + ms;
	while (1)
		{
		if(zeit < Date.now()){
		//alert(11);
		return 0;
		}
	}
}



var arbeitet = false;
var rechenbereich = -1;
var speed = 30;

//ARRAYS und Variablen
var schaltername = ["s1-1", "s1-2", "s1-3", "s1-4", "s1-5", "s1-6", "s1-7", "s1-8", "s1-9", "s2-1", "s2-2", "s2-3", "s2-4", "s2-5", "s2-6", "s2-7", "s2-8", "s2-9", "s3-1", "s3-2", "s3-3", "s3-4", "s3-5", "s3-6", "s3-7", "s3-8", "s3-9", "s4-1", "s4-2", "s4-3", "s4-4", "s4-5", "s4-6", "s4-7", "s4-8", "s4-9", "s5-1", "s5-2", "s5-3", "s5-4", "s5-5", "s5-6", "s5-7", "s5-8", "s5-9", "s6-1", "s6-2", "s6-3", "s6-4", "s6-5", "s6-6", "s6-7", "s6-8", "s6-9"];

//var winkel = [138.00, 133.15, 128.42, 123.25, 118.07, 113.19, 108.35, 103.30, 98.27, 198.04, 193.02, 188.13, 183.04, 178.29, 173.11, 168.05, 162.89, 158.17, 258.50, 253.31, 248.48, 243.24, 238.26, 233.37, 228.60, 223.32, 218.25, 318.78, 313.84, 308.80, 303.79, 298.89, 293.79, 288.61, 283.74, 278.33, 18.52, 13.81, 8.80, 3.72, 358.76, 354.00, 348.75, 343.69, 338.81, 78.69, 73.64, 68.88, 63.80, 58.62, 53.68, 48.67, 43.44, 39.00];
var winkel = [138.00, 133.15, 128.42, 123.25, 118.07, 113.19, 108.35, 103.30, 98.27, 198.04, 193.02, 188.13, 183.04, 178.29, 173.11, 168.05, 162.89, 158.17, 258.50, 253.31, 248.48, 243.24, 238.26, 233.37, 228.60, 223.32, 218.25, 318.78, 313.84, 308.80, 303.79, 298.89, 293.79, 288.61, 283.74, 278.33, 360+18.52, 360+13.81, 360+8.80, 360+3.72, 358.76, 354.00, 348.75, 343.69, 338.81, 360+78.69, 360+73.64, 360+68.88, 360+63.80, 360+58.62, 360+53.68, 360+48.67, 360+43.44, 360+39.00];

var winkelerg = [8.13, 23.03, 37.94, 53, 68, 83.03, 98.13, 113.07, 128.15, 143.25, 158.09, 173.18];

var schiebergesetzt = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; //Array um die gesetzten Schieber festzuhalten 0 = nicht gesetzt

var feststellstift = true;
var zaehlstift = 0
zaehl(-1);


//Posotion Täfelchenrings
var gradbereich = 14.09;
var ring = document.getElementById("anzeigering");
turn(ring, gradbereich);


//Scheiben positionieren


for (var i = 0; i < 12; i++)
{
	var pos=[395, 481.5];//position der ersten scheiben
	var letter=["k", "e"];//Buchstabe k kompliment e ergebnis
	for (var j = 0; j < 2; j++) {
		var sinus = Math.sin(bogen(winkelerg[i]));//sin + cos um die Position zu finden
		var cosinus = Math.cos(bogen(winkelerg[i]));
		var sch = letter[j] + i;

		var scheibe = document.getElementById(sch);
		var oben = scheibe.offsetTop - sinus * pos[j] + "px";//scheibe liegt genau in der Mitte der Maschine und wird über sinus und cosiun auf die richtige position gedrängt
		var links = scheibe.offsetLeft + cosinus * pos[j] + "px";

		scheibe.style.top = oben;
		scheibe.style.left = links;
		turn(scheibe, 360 - winkelerg[i] + 90);//die scheibe so drehen, sodass die Null genau im Winkel steht.

		}	
	}


//platten positionieren (clickflächen.. die grafiken sind so groß wie die maschine


for (var i = 0; i < 9*6; i++)
{
	var pos=298;//position (abstand von der Mitte)
	//var letter=["k", "e"];//Buchstabe k kompliment e ergebnis
	
		var sinus = Math.sin(bogen(winkel[i]));//sin + cos um die Position zu finden
		var cosinus = Math.cos(bogen(winkel[i]));
		var sch = "p" + i;

		var scheibe = document.getElementById(sch); //es heißt scheibe ist aber das plättchen
		var oben = scheibe.offsetTop - sinus * pos + "px";//scheibe liegt genau in der Mitte der Maschine und wird über sinus und cosiun auf die richtige position gedrängt
		var links = scheibe.offsetLeft + cosinus * pos + "px";

		scheibe.style.top = oben;
		scheibe.style.left = links;

		turn(scheibe, 360 - winkel[i]); //die scheibe so drehen, sodass die Null genau im Winkel steht.
	
	}

//ergebniswerk stell-4-kant werden positioniert


for (var i = 0; i < 12; i++)
{
	var pos=480; //position (abstand von der Mitte)
	
		var sinus = Math.sin(bogen(winkelerg[i]));//sin + cos um die Position zu finden
		var cosinus = Math.cos(bogen(winkelerg[i]));
		var sch = "es" + i;

		var scheibe = document.getElementById(sch); //es heißt scheibe ist aber das plättchen
		var oben = scheibe.offsetTop - sinus * pos + "px";//scheibe liegt genau in der Mitte der Maschine und wird über sinus und cosiun auf die richtige position gedrängt
		var links = scheibe.offsetLeft + cosinus * pos + "px";

		scheibe.style.top = oben;
		scheibe.style.left = links;

		turn(scheibe, 360 - winkelerg[i]); //die scheibe so drehen, sodass die Null genau im Winkel steht.
	
	}

	//Zählstiftclickflächen positionieren 

	for (var i = 0; i < 10; i++)
	{
		var r=165; //position (abstand von der Mitte)

			var sch = "z" + i;

					var x = 745;
					var y = 865;		
					var phi = 360 + 90 - 36 * (10 - i);
					var sinus = Math.sin(bogen(phi));
					var cosinus = Math.cos(bogen(phi));
		

			var scheibe = document.getElementById(sch); //es heißt scheibe ist aber das plättchen
			var oben = scheibe.offsetTop - sinus * r + "px";//scheibe liegt genau in der Mitte der Maschine und wird über sinus und cosiun auf die richtige position gedrängt
			var links = scheibe.offsetLeft + cosinus * r + "px";

			scheibe.style.top = oben;
			scheibe.style.left = links;

			turn(scheibe, 360-phi); //die scheibe so drehen, sodass die Null genau im Winkel steht.
		}


	


// SETZEN
	//Platten setzten

function setz(i) { //die Schieber werden gesetzt und rückgesetzt i ist die nummer des schiebers beginnend mit 0
	if (arbeitet){return;}
	if (rechenbereich > -1){
		alert("Die Maschine muss zuerste in die Einstellposition gebracht werden, um das Einstellwerk zu betätigen.");
		return;
	}

	if (!feststellstift){
		alert("Der Feststellstift muss eingesetzt werden, um die Einstellung sicher durchzuführen.");
		return;
		}

	var schub = 16; //wie weit soll der Schieber geschoben werden
	var vorzurueck = 0; //variable um den schieber entweder nach vor, oder zurückzuschieben (1 oder -1)
	if (schiebergesetzt[i] == 0){vorzurueck=1; schiebergesetzt[i]=1;}
	else {vorzurueck = -1; schiebergesetzt[i]=0;}// wenn nicht gesetzt schiebe nach vor und setzt auf 1.. ansonsten zurück und setzt wieder 0


	var elem = document.getElementById(schaltername[i]);
	var sinus = Math.sin(bogen(winkel[i]));
	var cosinus = Math.cos(bogen(winkel[i]));
	var oben = elem.offsetTop - sinus*schub*vorzurueck;//schub ist länge vorzurück ob vorwärts oder rückwärts 1 oder -1
	var links = elem.offsetLeft + cosinus*schub*vorzurueck;
	$oben = oben + "px";
	$links = links + "px";
	elem.style.top = $oben;
	elem.style.left = $links;


	//und auch die clickflächen müssen geschoben werden
	var elem = document.getElementById("p" + i);

	var oben = elem.offsetTop - sinus*schub*vorzurueck;//schub ist länge vorzurück ob vorwärts oder rückwärts 1 oder -1
	var links = elem.offsetLeft + cosinus*schub*vorzurueck;
	$oben = oben + "px";
	$links = links + "px";
	elem.style.top = $oben;
	elem.style.left = $links;
	

	}





//FESTSTELLSTIFT SETZTEN


function feststellen() { //den Feststellstift einsetzen
if (arbeitet){return;}

var elem = document.getElementById("feststellstift");
if (feststellstift == true){
	feststellstift = false;
	elem.style.visibility = "hidden"; 
}
else {
	feststellstift = true;
       elem.style.visibility = "visible";
}


}
//Zählstift setzen
function zaehl(z) {
	var elem = document.getElementById("zaehlstift");
	if (zaehlstift == z || z < 0 || z > 10){
		zaehlstift = -1;
		elem.style.visibility = "hidden";
		}	
	else{
		zaehlstift = z;
		var x = 745;
		var y = 865;		
		var r = 165;
		var phi = 360 + 90 - 36 * (10 - z);
		var sinus = Math.sin(bogen(phi));
		var cosinus = Math.cos(bogen(phi));
		
		elem.style.top = x-sinus*r +"px";
		elem.style.left= y+cosinus*r+"px";

		elem.style.visibility = "visible";
	}

}
//Sichtbarkeit der Kurbel bei setzten des Zählstifts 5/4
function sichtbarkeit(i) {
	if (arbeitet) {
		return;
		}
	var sicht = "visible";
	if (i == 0){
			sicht = "hidden";
		}

	document.getElementById('kurbel').style.visibility = sicht;	

}
//feststellen();//NUR ZUM TESTEN
//bereich(1);//NUR ZUM TESTEN
// Rechenbereich einstellen
function bereich(richtung){
	if (feststellstift){
		alert("Der Feststellstift muss entfernt werden.");
		return;
	}

	if (arbeitet || (richtung == 1 &&  rechenbereich == 4) || (richtung == -1 &&  rechenbereich < 0)){ // nicht wenn arbeitet oder wenn schon am rand ist
		return;}
	arbeitet = true;
	rechenbereich += richtung;

	var elem_schlussel = document.getElementById("schlusselloch");
	var elem_bereich = document.getElementById("anzeigering"); 
	var grad = 0;
	var id2 = setInterval(dreh, 1);
	
	function dreh() {
 		grad+=5;

		 if(grad<=(360)){
			turn(elem_schlussel, grad*richtung);
			drehung = gradbereich+grad*0.041388889*richtung*-1;
			
			turn(elem_bereich, drehung);
			

		 }
		else {
			
			clearInterval(id2);
			gradbereich = gradbereich - richtung * 14.09;
			elem_bereich.style.left = elem_bereich.offsetLeft + -1 * richtung * 5 + "px"; // Da diese Scheibe nicht ganz rund ist, muss sie nach ende der Drehung ein bisschen nachjustiert werden.
			//turn(elem_bereich, richtung*gradbereich);//
			arbeitet = false;
			//bereich(1);//NUR ZUM TESTEN
			return 0;
		}
	}

}





//berechnung
function move(){
	if (arbeitet){return;}
	if (rechenbereich < 0){
		alert("Die Maschine ist nicht in der Arbeitsstellung.");
		return;
	}
	if (feststellstift){
	alert("Der Feststellstift muss entfernt werden.");
	return;
	}
	if (zaehlstift == 0){
	alert("Der Zaehlstift steht an.");
	return;
	}


	var tempgesetzt = schiebergesetzt.slice();	
		
	var elem = document.getElementById("kurbel"); 
	var grad = 0;
	var arbeitsinterval = setInterval(dreh, speed);
	arbeitet = true;//wenn arbeitet, darf man sonst nichts verstellen


	function dreh() {
		//die kalkulation


		function calc(grad){

			for (var j = 0; j < 6*9; ++j){//j einstellwerk
				var intStelle = Math.floor(j/9) + rechenbereich;
				if ((360-winkel[j]) + (grad/2) > 360-winkelerg[intStelle] && tempgesetzt[j] > 0){
					stell(intStelle);
					tempgesetzt[j] = 0;				
				}
			}
			
			
		}




 		grad+=2;
		 if(grad<=(360*2)){
			turn(elem, grad%360);
			calc(grad);

		 }
		else {
			zaehl(zaehlstift -1);//den zählstift einmal zurückreihen
        		arbeitet = false;//wir arbeiten nicht mehr
			
			clearInterval(arbeitsinterval);		
			return 0;
		}
	}
}








var ergebnis = [0,0,0,0,0,0,0,0,0,0,0,0];

function stell(s, u=0){//s = die stelle u= die anzahl der überträge default 0
	
	// wenn ich das dritte mal in folge Weiterdrehen will, geht das nicht
	if (u > 4) {alert("Aus technischen Gründen schafft diese Sprossenradmaschine nicht mehr als 3 Stellenüberträge in Folge."); 
	arbeitet = true;
	return false;}


			async function dreh2(s, e, k, oneto36=0, warten=25){
				if(oneto36 > 36){
					turn(e, 90 - winkelerg[s] + 36 * ergebnis[s]);
					turn(k, 90 - winkelerg[s] - 36 * ergebnis[s]);
					return;
				}
				else{
					turn(e, 90 - winkelerg[s] + 36 * ergebnis[s] - 36 + oneto36);
					turn(k, 90 - winkelerg[s] - 36 * ergebnis[s] + 36 - oneto36);
					await sleep(warten);
					dreh2(s, e, k, oneto36 + 3, warten);
				}
			}
	
	
	
	
	var richtig = true; //Variable um mir zu merken ob ich überhaupt weiterdrehen darf
	
	if (ergebnis[s] == 9 && s < 11){//Wenn die Zahl zuvor 9 ist, muss auch die naechste stelle weitergedreht werden
		richtig = stell(s + 1, u + 1); // aber nur, wenn es nicht mehr als 2 weiter sind
			}
		

	if(richtig){ // wenn alles passt dreh weiter
		ergebnis[s]++;
		ergebnis[s]=ergebnis[s]%10;
		e= "e"+s;
		k= "k"+s;
		e = document.getElementById(e);
		k = document.getElementById(k);
		
		dreh2(s, e, k, 0, 5);
		
		
		}

	return richtig; //gib zurück, ob wir weiterdrehen dürfen
	
		
	}
	
</script>
